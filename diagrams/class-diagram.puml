@startuml
!define TITLE 2.2 Diagramme de classes
title TITLE

class User {
  -id: Long
  -username: String
  -email: String
  -password: String
  -role: UserRole
  -createdAt: DateTime
  +login(): boolean
  +logout(): void
  +updateProfile(): void
}

enum UserRole {
  PLATFORM_ADMIN
  CLASS_ADMIN
  STUDENT
}

class Class {
  -id: Long
  -name: String
  -description: String
  -createdAt: DateTime
  -isActive: boolean
  +addStudent(student: User): void
  +removeStudent(student: User): void
  +getStudents(): List<User>
}

class File {
  -id: Long
  -filename: String
  -originalName: String
  -fileType: FileType
  -size: Long
  -uploadedAt: DateTime
  -filePath: String
  +upload(): boolean
  +download(): byte[]
  +delete(): boolean
}

enum FileType {
  IMAGE
  PDF
  WORD_DOCUMENT
  EXCEL_SPREADSHEET
  OTHER
}

class FileCategory {
  -id: Long
  -name: String
  -description: String
  -isCustom: boolean
  +createCategory(): void
  +updateCategory(): void
}

class FileShare {
  -id: Long
  -shareType: ShareType
  -sharedAt: DateTime
  -expiresAt: DateTime
  +shareWithClass(): void
  +shareDirectly(): void
  +revokeAccess(): void
}

enum ShareType {
  CLASS_WIDE
  DIRECT_SHARE
  INTER_CLASS
}

class Storage {
  -id: Long
  -userId: Long
  -totalSpace: Long
  -usedSpace: Long
  +calculateUsedSpace(): Long
  +checkQuota(): boolean
}

' Relations
User ||--|| UserRole
User ||--o{ Class : "manages/belongs to"
User ||--o{ File : "uploads"
User ||--o{ Storage : "has"
File }o--|| FileType
File }o--o{ FileCategory : "categorized by"
File ||--o{ FileShare : "shared via"
FileShare }o--|| ShareType
Class ||--o{ FileShare : "receives"

@enduml
